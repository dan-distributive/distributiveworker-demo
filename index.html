<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <script src="https://scheduler.distributed.computer/dcp-client/dcp-client.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- Page gutter -->
  <div class="page-gutter">

    <!-- Main vertical layout container -->
    <main class="app">

      <!-- Header -->
      <header>
        <div class="title-row">
          <img
            src="dcp-logo.svg"
            alt="DCP logo"
            class="title-logo"
          />
          <h1 class="title">DCP Browser Worker</h1>
        </div>

        <div class="text-with-link">
          <p class="text">
            This webpage demonstrates a working integration of the DistributiveWorker
            class.
            <span class="hide-on-mobile">
              The worker fetches tasks from the DCP Sceduler, deposits earned credits
              into a pre-configured account, logs events, and more.
            </span> Check out the GitHub source to explore and modify it yourself:
          <a
            href="https://github.com/dan-distributive/distributiveworker-demo"
            class="link"
            target="_blank"
            rel="noopener noreferrer"
          >
            GitHub
            <svg
              width="12"
              height="12"
              viewBox="0 0 200 350"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                transform="translate(0 600) scale(1.5 -1.5)"
                d="M189.1406 348.75 L41.9062 348.75 L21.2344 328.0781
                   L153.7031 328.0781 L21.0938 195.4688 L35.8594 180.7031
                   L168.3281 313.3125 L168.3281 180.8438 L189.1406 201.6562
                   L189.1406 348.75 Z"
              />
            </svg>
          </a>
        </p>
        </div>
      </header>

      <!-- Worker info -->
      <div class="worker-info">
        <p class="worker-key worker-section-title">
          - Worker config -
        </p>
        <p class="worker-key">
          Compute group:
          <span class="worker-value">
        
            <label class="radio-option">
              <input type="radio" name="computeGroup" value="global" checked />
              <span class="custom-radio"></span>
              <span class="radio-label">public</span>
            </label>
            
            <label class="radio-option" style="margin-left:12px;">
              <input type="radio" name="computeGroup" value="private" />
              <span class="custom-radio"></span>
              <span class="radio-label">SMART</span>
            </label>
            
          </span>
        </p>
        
        <p class="worker-key worker-key-input">
          Deposit account:
          <input
            id="payment-account"
            class="worker-value"
            type="text"
            value="0x079dac0612c710ab4e975dab7171c7e4bef78c5a"
            placeholder="Enter your deposit account"
          />
        </p>

        <span class="hide-on-mobile">
          <p class="worker-key min-wage-row">
            Minimum wage:
            <span class="min-wage-inputs-wrapper">
              <span class="min-wage-inputs">
                CPU <input type="text" name="mw-cpu" maxlength="10" value="0" class="mw-input" />
                GPU <input type="text" name="mw-gpu" maxlength="10" value="0" class="mw-input" />
                in  <input type="text" name="mw-in" maxlength="10" value="0" class="mw-input" />
                out <input type="text" name="mw-out" maxlength="10" value="0" class="mw-input" />
              </span>
            </span>
          </p> 
        </span>

        <p class="worker-key">
          Max sandboxes:
          <input
            id="max-sandboxes"
            class="worker-value short-field"
            type="text"
            value="4"
            placeholder="Enter max sandboxes"
          />
        </p>
        
        <span class="hide-on-mobile">
          <p class="worker-key">
            Allowed job IDs:
            <input
              id="allowed-job-id"
              class="worker-value"
              type="text"
              value=""
              placeholder="any"
            />
          </p>

          <p class="worker-key">
            Allowed origins:
            <input
              id="allowed-origins"
              class="worker-value"
              type="text"
              value=""
              placeholder="none"
            />
          </p>    
        </span>

        <p class="worker-key">
          Credits earned:
          <span id="total-earned" class="worker-value">
            0.000 âŠ‡
          </span>
        </p>
      </div>

      <!-- Button row -->
      <div class="button-row">
        <button
          id="work-btn"
          class="crosshair-btn"
          type="button"
          onclick="toggleWorker()"
        >
          <span class="btn-text">START</span>

          <svg width="16" height="16" viewBox="0 0 200 350" fill="currentColor">
            <path
              d="M189.1406 348.75 L41.9062 348.75 L21.2344 328.0781
                 L153.7031 328.0781 L21.0938 195.4688 L35.8594 180.7031
                 L168.3281 313.3125 L168.3281 180.8438 L189.1406 201.6562
                 L189.1406 348.75 Z"
            />
          </svg>

          <span class="c1"></span>
          <span class="c2"></span>
        </button>
      </div>


      <!-- Console (fills remaining height) -->
      <section class="textarea-wrap">
        <textarea
          id="workerConsole"
          spellcheck="false"
        ></textarea>
      </section>

    </main>
  </div>

  <script src="worker.js"></script>

</body>
</html>
